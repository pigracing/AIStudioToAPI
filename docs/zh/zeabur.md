# 部署到 Zeabur

本指南将帮助你在 [Zeabur](https://zeabur.com/) 上部署 `aistudio-to-api` 服务。

> [!CAUTION]
> **Zeabur 的免费额度每个月赠金 5 美元，不足以支持 24 小时运行。因此，不用的时候请务必暂停服务！**

## 📦 部署步骤

1. **登录**：前往 [https://zeabur.com/projects](https://zeabur.com/projects) 并登录你的账号。
2. **创建项目**：点击 **创建项目** 按钮，区域选择 **Jakarta, Indonesia**。
3. **选择服务类型**：选择 **Docker 容器镜像**。
4. **配置应用**：填写以下参数：

   **镜像**：
   - **镜像名称**：`ghcr.io/ibuhub/aistudio-to-api:latest`
   - **用户名**：不用填写
   - **密码**：不用填写

   **环境变量**：
   - 点击 **添加环境变量** 按钮。
   - **无需点击「暴露」**。
   - 必填参数 `API_KEYS`。其他参数选填（参考主 README 中的 [配置](../../README.md#-相关配置) 部分）。

   | Name       | Value                 | Description                                        |
   | :--------- | :-------------------- | :------------------------------------------------- |
   | `API_KEYS` | `your-secret-key-123` | **必填**。自定义你的访问密钥，多个密钥用逗号分隔。 |

   **端口**：
   - 点击 **添加端口** 按钮。
   - **端口号**：`7860`
   - **端口类型**：`HTTP`

5. **部署**：点击 **部署** 按钮开始部署。
6. **配置公网访问**：
   - 点击 **网络** 标签页。
   - 点击 **公网访问**。
   - 点击 **+ 生成域名** 按钮，自定义一个域名。

## 📡 访问服务

等待应用启动完成后，通过生成的公网域名访问服务。输入你设置的 `API_KEYS` 即可进入管理页面。

## 🔑 账号管理

部署后，需要添加 Google 账号。有以下两种方式：

**方法 1：VNC 登录（推荐）**

- 在浏览器中访问部署的服务地址并点击「添加账号」按钮
- 将跳转到 VNC 页面，显示浏览器实例
- 登录您的 Google 账号，登录完成后点击「保存」按钮

**方法 2：上传认证文件**

- 在本地机器上运行 `npm run setup-auth` 生成认证文件（参考主 README 中的 [直接运行](../../README.md#-直接运行windows--macos--linux) 的 1 和 2），认证文件在 `/configs/auth`
- 在网页控制台，点击「上传 Auth」，上传 auth 的 JSON 文件

> 💡 **提示**：您也可以从已有的服务器下载 auth 文件，然后上传到新的服务器。在网页控制台点击对应账号的「下载 Auth」按钮即可下载 auth 文件。

## 🔌 API 访问地址

部署完成后，使用公网域名配合以下 Base URL 访问 API：

- **OpenAI 兼容 Base URL**: `https://<your-public-domain>/v1`
- **Gemini 兼容 Base URL**: `https://<your-public-domain>/v1beta`
- **Anthropic 兼容 Base URL**: `https://<your-public-domain>/v1`

> 更多详细信息，请参考主 README 中的 [使用 API](../../README.md#-使用-api) 章节。

## ⏸️ 暂停与启动服务

> [!WARNING]
> Zeabur 的 5 美元赠金不足以支撑 24 小时运行。**强烈建议不用的时候就暂停服务**，避免消耗赠金！要用的时候再启动。

### 暂停服务

1. 进入服务详情页。
2. 点击 **设置** 标签页。
3. 滚动到最下面，点击 **暂停服务** 按钮。

### 启动服务

1. 进入服务状态页面。
2. 点击 **重启当前版本** 按钮。

## 🔄 版本更新

如需更新到最新版本：

1. 进入服务详情页。
2. 点击 **服务** 标签页。
3. 点击 **重启当前版本** 按钮。
